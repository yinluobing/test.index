<?php goto zUdRW; QEM4J: if ($VxkjE) {goto spgXR; } goto gZ0W0; iUtlh: $data["t2name"] = $_GPC["t2name"]; goto J2PwY; uc1l3: $data["t4value"] = $_GPC["t4v"]; goto gs48N; NKV_y: spgXR: goto l2O7s; jRuD9: $data["uniacid"] = $uniacid; goto W3Mj3; hpuV2: function sendMail($body, $subject, $to, $senduser, $sendpass) {goto OIX1f; oiM2J: $mailer->SMTPAuth = true; goto RcKOT; HwBwf: if ($Pf7Vr) {goto O5r3G; } goto El7W2; RPk8B: $config["smtp"]["port"] = 465; goto iGlUa; Fa9C6: $body = ''; goto jKhu7; El7W2: $mailer->addAttachment(ltrim($body, "@")); goto seLFE; tgu2B: return true; goto Qjv7Q; R36z9: QXJNl: goto HTy8i; OIX1f: static $mailer; goto tM0Ci; OoiAM: $config["smtp"]["server"] = "ssl://smtp.qq.com"; goto RPk8B; Z4KwI: if ($mailer->send()) {goto YVlt7; } goto k38lG; QU9NP: XfHzP: goto Fa9C6; Gwxtk: YVlt7: goto tgu2B; DaXlG: oduLU: goto i01Lv; AxNDj: $mailer->Body = $body; goto tfANH; TqoJD: $mailer->isSMTP(); goto kFlKl; fXDHS: $Pf7Vr = !(substr($body, 0, 1) == "@"); goto HwBwf; Xv6oq: $mailer->Host = $config["smtp"]["server"]; goto q0M4m; iJwlO: goto hwx1J; goto Gwxtk; tfANH: if (strpos($to, ",")) {goto QXJNl; } goto woMRj; Qjv7Q: hwx1J: goto oEOEB; YYurx: $mailer = new PHPMailer(); goto H0QlT; Y6UHu: $config["username"] = $senduser; goto ZAH7W; Ctqkh: $mailer->From = $config["username"]; goto ttmw3; gj1bR: TYtVx: goto RCpeJ; TjWTG: $body .= htmlspecialchars_decode($mailer->signature); goto gj1bR; RcKOT: $mailer->Username = $config["username"]; goto d89Ff; k38lG: return error(1, $mailer->ErrorInfo); goto iJwlO; ttmw3: $mailer->FromName = $config["sender"]; goto U_mra; zZDJN: $m5tBp = empty($mailer->signature); goto fozPQ; RCpeJ: $mailer->Subject = $subject; goto AxNDj; mOQXI: !empty($config["smtp"]["authmode"]) && ($mailer->SMTPSecure = "ssl"); goto Ctqkh; eSuHq: NgsEW: goto lvpb3; pJ1VT: foreach ($arr as $key => $value) {goto S8ROG; Shg4O: I9Lkk: goto N7XoC; S8ROG: $Geb51 = !$value; goto ag8c0; C4Vrx: qROKo: goto Shg4O; en09X: $mailer->addAddress($value); goto C4Vrx; ag8c0: if ($Geb51) {goto qROKo; } goto en09X; N7XoC: } goto DaXlG; zQzTy: $config = $GLOBALS["_W"]["setting"]["mail"]; goto OoiAM; F7KKe: $dBrif = !$body; goto u4uiW; ZAH7W: $config["password"] = $sendpass; goto ki3n5; mnI31: $config["charset"] = "utf-8"; goto Y6UHu; HTy8i: $arr = explode(",", $to); goto pJ1VT; YAu5S: if (is_array($body)) {goto XfHzP; } goto fXDHS; TBtLT: O5r3G: goto eRLpw; u4uiW: if ($dBrif) {goto zA7_6; } goto YAu5S; U_mra: $mailer->isHTML(true); goto F7KKe; T1CGu: OZTKG: goto eSuHq; q0M4m: $mailer->Port = $config["smtp"]["port"]; goto oiM2J; eRLpw: goto NgsEW; goto QU9NP; jKhu7: foreach ($body as $value) {goto L9LVF; OiMAv: $mailer->addAttachment($file); goto R24WU; FuZp3: if ($qDWiA) {goto TWYNv; } goto rcJ7n; R24WU: zOKQH: goto m_GVI; o8ljl: EQ2BD: goto hhMN1; KyLfp: TWYNv: goto OiMAv; rcJ7n: return error(1, $file . " 附件不存在或非文件！"); goto KyLfp; hhMN1: $qDWiA = is_file($file = ltrim($value, "@")); goto FuZp3; m_GVI: nBEef: goto guQ8s; HVhuS: goto zOKQH; goto o8ljl; L9LVF: if (substr($value, 0, 1) == "@") {goto EQ2BD; } goto m4e2q; m4e2q: $body .= $value . "\\n"; goto HVhuS; guQ8s: } goto T1CGu; kFlKl: $mailer->CharSet = $config["charset"]; goto Xv6oq; lvpb3: zA7_6: goto zZDJN; tM0Ci: load()->library("phpmailer"); goto YYurx; i01Lv: WjQ9d: goto Z4KwI; sgtR7: $config["signature"] = ''; goto mnI31; d89Ff: $mailer->Password = $config["password"]; goto mOQXI; iGlUa: $config["smtp"]["authmode"] = 0; goto g3lZX; ki3n5: $mailer->signature = $config["signature"]; goto TqoJD; Evmno: goto WjQ9d; goto R36z9; seLFE: $body = ''; goto TBtLT; woMRj: $mailer->addAddress($to); goto Evmno; fozPQ: if ($m5tBp) {goto TYtVx; } goto TjWTG; g3lZX: $config["sender"] = ''; goto sgtR7; H0QlT: global $_W; goto zQzTy; oEOEB: } goto sMT9a; A4aub: $data["aname"] = $_GPC["aname"]; goto vnHJk; JlGxU: $message = "两次提交的时间间隔不能少于" . $interval . "分钟"; goto OYc4n; vnHJk: $data["avalue"] = $_GPC["av"]; goto ccS4a; uKb9V: $data["t4name"] = $_GPC["t4name"]; goto uc1l3; QxqAA: $res = pdo_insert("yyf_company_formvalue", $data); goto XYdyX; gZ0W0: sendMail($con, $row["message_title"], $row["message_email"], $row["smtp_email"], $row["smtp_key"]); goto NKV_y; l2O7s: xEzmv: goto o7dxt; J7N6o: $data["t1value"] = $_GPC["t1v"]; goto iUtlh; lzOzR: $data = array(); goto jRuD9; G0Iqv: $data["t3value"] = $_GPC["t3v"]; goto uKb9V; At642: $data["t3name"] ? $con .= $data["t3name"] . ": " . $data["t3value"] . "<br/>" : ''; goto xdihE; J2PwY: $data["t2value"] = $_GPC["t2v"]; goto YMvMu; zUdRW: global $_GPC, $_W; goto biXMS; au3Y2: $row = pdo_get("yyf_company_sysinfo", array("uniacid" => $uniacid), array("message_email", "message_title", "smtp_email", "smtp_key")); goto BWYHq; IV4Pd: $data["t2name"] ? $con .= $data["t2name"] . ": " . $data["t2value"] . "<br/>" : ''; goto At642; YMvMu: $data["t3name"] = $_GPC["t3name"]; goto G0Iqv; Y8Ztr: $result = pdo_fetch("SELECT * FROM " . tablename("yyf_company_form") . " where `uniacid`='{$uniacid}' order by id desc limit 1"); goto zIxUS; wp2M8: if ($m3zkR) {goto xEzmv; } goto pByqD; UxvQA: if ($V57ID) {goto wZspZ; } goto JlGxU; biXMS: $uniacid = $_GPC["uniacid"]; goto Y8Ztr; SzadK: die; goto dFv8G; gs48N: $data["rname"] = $_GPC["rname"]; goto BEdGI; dFv8G: wZspZ: goto lcF7t; hY5Z3: $data["cvalue"] = $_GPC["cv"]; goto Nofzi; ccS4a: $data["cname"] = $_GPC["cname"]; goto hY5Z3; OYc4n: $errno = 1; goto okYy2; W3Mj3: $data["t1name"] = $_GPC["t1name"]; goto J7N6o; nnVuh: return $this->result($errno, $message); goto hpuV2; xUMc3: $data["cname"] ? $con .= $data["cname"] . ": " . $data["cvalue"] : ''; goto au3Y2; pByqD: $con = ''; goto Dbynj; SfjTY: $data["aname"] ? $con .= $data["aname"] . ": " . $data["avalue"] . "<br/>" : ''; goto xUMc3; Dbynj: $data["t1name"] ? $con .= $data["t1name"] . ": " . $data["t1value"] . "<br/>" : ''; goto IV4Pd; zIxUS: $interval = $result["interval"]; goto VVYzA; o7dxt: $errno = 0; goto nnVuh; lcF7t: CZU6R: goto lzOzR; BEdGI: $data["rvalue"] = $_GPC["rv"]; goto A4aub; BWYHq: $VxkjE = !($row["message_email"] && $row["smtp_email"]); goto QEM4J; VVYzA: $OAi8J = !($interval != 0 && $_GPC["sendtime"] != 0); goto EcEu7; okYy2: return $this->result($errno, $message); goto SzadK; XYdyX: $m3zkR = !$res; goto wp2M8; xdihE: $data["t4name"] ? $con .= $data["t4name"] . ": " . $data["t4value"] . "<br/>" : ''; goto myA7R; myA7R: $data["rname"] ? $con .= $data["rname"] . ": " . $data["rvalue"] . "<br/>" : ''; goto SfjTY; Nofzi: $data["addtime"] = time(); goto QxqAA; EcEu7: if ($OAi8J) {goto CZU6R; } goto jDKlF; jDKlF: $V57ID = !(time() - $_GPC["sendtime"] < $interval * 60); goto UxvQA; sMT9a: